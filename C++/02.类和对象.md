## 定义类和方法

C++将结构体升级成了类，所以你可以在结构体里定义函数。

但是C++不建议使用struct关键字来定义类，而是使用class关键字。

```cpp
class 类名{···};
```

> 类和对象的三大特点：封装，继承，多态
>
> 类中依旧存在内存对齐，当类中没有成员变量只有方法时，其大小为1字节。这一个字节不存储有效数据，只用来表示对象被实例化。

你可以在类外定义指定类的方法。

```cpp
class 类名{···};
type 类名::方法名(){}
```

> 虽然是在类外定义的方法，但是其作用域和生命周期并没有改变，依旧相当于在类的内部进行了定义。

## 方法和成员

在类中定义的函数称作类**方法**，变量称作**成员变量**。

成员变量在对象中，成员函数不在对象中。

因为每个对象的成员变量是不同的，但是同一个类的不同对象调用的是一样的函数。所以每个对象调用成员函数是一样的，放到一个公共区域（代码段）。

> 因为方法不在对象中，而是在代码段中。所以如果方法中没有使用类成员变量，那么即使是通过空指针调用方法，也能正常执行程序。因为你实际上没有访问空指针。而如果方法中使用了成员变量，那么你就需要访问对象的地址，此时发生了空指针的解引用，报错。
>
> ```cpp
> 类名* p = nullptr;
> p->方法();
> ```

### 访问类成员和方法

使用 `.`来访问类的成员和方法

```cpp
类名.方法名(实参表);
类名.成员名
```

> 只有在类外访问其公共的成员和方法时才需要这样写，私有成员和方法只有在类的内部才能访问，也不需要 `.`操作符，直接使用成员或方法名访问即可

### this指针

this指针指代对象自己，通过哪个对象访问的类，this就指向那个对象。当同一个类有不同对象时，this用来区分每个对象,确认是哪个对象调用了类方法，或是确认应当使用哪个对象的成员。this在类创建时被编译器定义，不需要手动定义。

this存在于栈中，是每个类方法隐含的参数，只能在方法中使用。（VS中是通过ecx寄存器）

this是const的，不能被修改。

## 类对象的实例化

类在定义和声明时并不会开辟空间，只有在实例化相应的类对象时才会开空间。（相当于建立结构体对象时才会开辟结构体空间)

```cpp
类名 对象名;
```

## 访问限定

我们可以限定变量和方法的权限

- public公有
- private私有
- protected保护

公有变量和方法可以在类外访问，私有和保护的变量和方法只能在类中访问.

> class定义的类的方法默认为private，struct定义的类的方法默认为public（为了和C兼容）
>
> 但是我们依旧建议写明其权限，即使和默认的权限一样
>
> 访问限定符只在编译中有用，映射到内存后并无区别

```cpp
class类名{
private:
	私有变量和方法
public:
	公有变量和方法
}
```

### 封装

封装就是隐藏对象的属性和实现细节，只通过接口来调用它。而不追究其内部实现。

C++控制数据和方法的访问方式，可以在类外访问的为公有，不可以的为私有。

使这得数据和方法的访问更安全，更不容易出错。
